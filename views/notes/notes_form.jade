extends ../layout

block content
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/11.2.0/classic/ckeditor.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Include Editor style. -->
    <link href='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/css/froala_editor.min.css' rel='stylesheet' type='text/css' />
    <link href='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/css/froala_style.min.css' rel='stylesheet' type='text/css' />
     
    <!-- Include JS file. -->
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/froala_editor.min.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/froala_editor.min.js'></script>
    //- <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/plugins/video.min.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/plugins/image.min.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/plugins/link.min.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/plugins/lists.min.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/plugins/paragraph_format.min.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/froala-editor@2.9.1/js/plugins/word_paste.min.js'></script>

    style(type='text/css').
        .ck-editor__editable {
            min-height: 1000px;
        }
        #strikeThrough-1, #subscript-1, #supersubscript-1,  {
            display: none;
        }

    h2 Nouvelles notes de lecture

    form(method='POST' action='')

        div.form-group.white-round-div
            <textarea name='content'></textarea>
            
            input(type='hidden' name='book_id')
            button.btn.btn-primary(type='submit') Envoyer

    script.
        var book_id = !{JSON.stringify(book_id)};
        $('input[name=book_id]').val(book_id);
        $(function() { $('textarea').froalaEditor({
            heightMin: 600,
            language: 'fr',
            imageUploadRemoteUrls: false // keep image URL instead of uploading to server
        }) });
        const hidden_btns = ['#strikeThrough-1', '#superscript-1', '#subscript-1', '#imageUpload-1'];
        $(document).ready(() => {
            hidden_btns.map(id => $(id).css('display', 'none'));
            var note = !{JSON.stringify(note)};
            console.log(note)
            note!={} ? $('.fr-element').html(note.content) : {}
        })

